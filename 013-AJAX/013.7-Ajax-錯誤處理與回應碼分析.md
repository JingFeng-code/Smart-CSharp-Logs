---
title: â—ï¸013.7-Ajax-éŒ¯èª¤è™•ç†èˆ‡å›æ‡‰ç¢¼åˆ†æ
tags:
  - AJAX
  - éŒ¯èª¤è™•ç†
  - HTTP å›æ‡‰ç¢¼
  - JavaScript
  - Fetch API
  - jQuery AJAX
aliases:
  - Ajax éŒ¯èª¤è™•ç†
  - HTTP éŒ¯èª¤ç¢¼èªªæ˜
  - éåŒæ­¥è«‹æ±‚ä¾‹å¤–è™•ç†
created: 2025-07-21
updated: 2025-07-21
status: å®Œæˆ
summary: æœ¬ç¯‡ç­†è¨˜èªªæ˜ AJAX éåŒæ­¥è«‹æ±‚çš„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶ï¼ŒåŒ…å« HTTP å›æ‡‰ç¢¼çš„åŸºæœ¬æ„ç¾©èˆ‡å¦‚ä½•åœ¨ Fetch API æˆ– jQuery ä¸­è™•ç†ä¾‹å¤–ã€æç¤ºä½¿ç”¨è€…éŒ¯èª¤è³‡è¨Šã€‚
---

AJAX åŸ·è¡ŒéåŒæ­¥è«‹æ±‚æ™‚ï¼Œå¸¸æœƒé‡åˆ°å¤±æ•—ã€é€¾æ™‚ã€ä¼ºæœå™¨éŒ¯èª¤ç­‰æƒ…æ³ã€‚æœ‰æ•ˆçš„éŒ¯èª¤è™•ç†æœ‰åŠ©æ–¼æç¤ºä½¿ç”¨è€…ã€è¨˜éŒ„å•é¡Œã€é¿å…ç¨‹å¼ä¸­æ–·ã€‚

---

## 1ï¸âƒ£ éŒ¯èª¤ä¾†æºé¡å‹åˆ†é¡

| éŒ¯èª¤ä¾†æº | èªªæ˜ |
|----------|------|
| ä½¿ç”¨è€…è¼¸å…¥éŒ¯èª¤ | è¡¨å–®æ ¼å¼éŒ¯èª¤ã€é©—è­‰å¤±æ•— |
| å®¢æˆ¶ç«¯éŒ¯èª¤ | JavaScript ç¨‹å¼é‚è¼¯ã€ç¶²è·¯å•é¡Œ |
| ä¼ºæœå™¨éŒ¯èª¤ | API æ‹‹å‡ºä¾‹å¤–ã€è³‡æ–™åº«é€£ç·šå¤±æ•— |
| HTTP éŒ¯èª¤ç¢¼ | å›å‚³ 4xxã€5xx ç³»åˆ—ç‹€æ…‹ |

---

## 2ï¸âƒ£ å¸¸è¦‹ HTTP å›æ‡‰ç¢¼æ•´ç†

| ç‹€æ…‹ç¢¼ | é¡åˆ¥ | æ„ç¾© |
|--------|------|------|
| 200 | âœ… æˆåŠŸ | ä¸€åˆ‡æ­£å¸¸ï¼Œå›å‚³è³‡æ–™ |
| 201 | âœ… å»ºç«‹æˆåŠŸ | é€šå¸¸ç”¨æ–¼ POST æˆåŠŸå»ºç«‹ |
| 204 | âœ… ç„¡å…§å®¹ | æˆåŠŸä½†ç„¡éœ€å›æ‡‰å…§å®¹ |
| 400 | âš ï¸ éŒ¯èª¤è«‹æ±‚ | è«‹æ±‚æ ¼å¼éŒ¯èª¤ï¼Œå¸¸è¦‹æ–¼é©—è­‰å¤±æ•— |
| 401 | âŒ æœªæˆæ¬Š | ä½¿ç”¨è€…å°šæœªç™»å…¥æˆ–æ¬Šé™ä¸è¶³ |
| 403 | âŒ ç¦æ­¢å­˜å– | ç„¡æ¬Šå­˜å–è©²è³‡æº |
| 404 | âŒ æ‰¾ä¸åˆ°è³‡æº | URI éŒ¯èª¤æˆ–è³‡æºä¸å­˜åœ¨ |
| 422 | âš ï¸ é©—è­‰éŒ¯èª¤ | è¡¨å–®æ¬„ä½é©—è­‰å¤±æ•— |
| 500 | ğŸ’¥ ä¼ºæœå™¨éŒ¯èª¤ | API å…§éƒ¨éŒ¯èª¤ |
| 503 | ğŸ› ï¸ æš«æ™‚ç„¡æ³•ä½¿ç”¨ | ç³»çµ±ç¶­è­·ä¸­ã€éè¼‰ä¸­ |

---

## 3ï¸âƒ£ Fetch API éŒ¯èª¤è™•ç†ç¯„ä¾‹

```js
fetch("/api/data")
  .then(res => {
    if (!res.ok) {
      throw new Error(`éŒ¯èª¤ç‹€æ…‹ç¢¼ï¼š${res.status}`);
    }
    return res.json();
  })
  .then(data => {
    console.log("æˆåŠŸå–å¾—è³‡æ–™", data);
  })
  .catch(err => {
    console.error("è«‹æ±‚å¤±æ•—ï¼š", err.message);
    alert("è«‹æ±‚å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ï¼");
  });
```

ğŸ“Œ `res.ok` æ˜¯ `status` åœ¨ 200~299 æ™‚å›å‚³ `true`

---
## 4ï¸âƒ£ jQuery AJAX éŒ¯èª¤è™•ç†æ–¹å¼

```javascript
$.ajax({
  url: "/api/data",
  method: "GET",
  success: function(data) {
    console.log("æˆåŠŸ", data);
  },
  error: function(xhr, status, error) {
    console.error("AJAX å¤±æ•—", xhr.status, error);
    alert("ç™¼ç”ŸéŒ¯èª¤ï¼š" + xhr.status + " - " + xhr.responseText);
  }
});
```

ğŸ’¡ `xhr.status` å›å‚³ HTTP ç‹€æ…‹ç¢¼ï¼Œ`xhr.responseText` å¯å–å¾—éŒ¯èª¤è¨Šæ¯

---
## 5ï¸âƒ£ å‰ç«¯å¸¸è¦‹éŒ¯èª¤é¡¯ç¤º UX å¯¦ä½œå»ºè­°

- ç”¨ã€Œç´…è‰²è¨Šæ¯æ¡†ã€é¡¯ç¤ºéŒ¯èª¤ï¼Œé¿å… alert é€ æˆä¸­æ–·é«”é©—

- éŒ¯èª¤é¡¯ç¤ºå€åŸŸå»ºè­°èˆ‡è¡¨å–®é è¿‘ï¼Œè®“ä½¿ç”¨è€…ç«‹åˆ»çŸ¥é“å•é¡Œæ‰€åœ¨

- å°æ–¼ `401/403`ï¼Œå¯è‡ªå‹•å°å‘ç™»å…¥é æˆ–æç¤ºé‡æ–°æˆæ¬Š

- `5xx` éŒ¯èª¤å¯æä¾›ã€Œé‡è©¦ã€æŒ‰éˆ•æˆ–ã€Œå›å ±å•é¡Œã€é€£çµ

	---
## 6ï¸âƒ£ å¾Œç«¯å›å‚³æ¨™æº–éŒ¯èª¤æ ¼å¼å»ºè­°ï¼ˆJSONï¼‰

```json
{
  "success": false,
  "message": "ä½¿ç”¨è€…åç¨±é‡è¤‡",
  "errorCode": "USERNAME_EXISTS"
}
```

å‰ç«¯å¯ä¾æ“š `errorCode` ä½œä¸åŒé‚è¼¯è™•ç†ã€‚

---
## 7ï¸âƒ£ çµ±ä¸€éŒ¯èª¤è™•ç†å°è£ï¼ˆFetch ç‰ˆæœ¬ï¼‰
```javascript
async function safeFetch(url, options = {}) {
  try {
    const res = await fetch(url, options);
    if (!res.ok) {
      const data = await res.json();
      throw new Error(data.message || "ç™¼ç”ŸæœªçŸ¥éŒ¯èª¤");
    }
    return await res.json();
  } catch (err) {
    console.error("Fetch éŒ¯èª¤ï¼š", err);
    alert("è«‹æ±‚å¤±æ•—ï¼š" + err.message);
    return null;
  }
}
```

---

## ğŸ”— ç›¸é—œå¡ç‰‡

- [[013.2-Ajax-XMLHttpRequest åŸºæœ¬ä½¿ç”¨æ–¹å¼]]
- [[013.3-Ajax-Fetch API ç¾ä»£å¯«æ³•]]
- [[013.5-Ajax-è™•ç† JSON èˆ‡å›å‚³è³‡æ–™]]
- [[012.2-Restful-HTTP å‹•è©èˆ‡è³‡æºè¨­è¨ˆ]]
- [[011-CoreMVC-éŒ¯èª¤è™•ç†èˆ‡ä¾‹å¤–æ””æˆª]]

---

## ğŸ“ å°çµ

è‰¯å¥½çš„éŒ¯èª¤è™•ç†èƒ½æå‡ä½¿ç”¨è€…ä¿¡ä»»èˆ‡ç³»çµ±ç©©å®šæ€§ã€‚é€éè§£æ HTTP å›æ‡‰ç¢¼èˆ‡æ­é…å‰ç«¯æç¤ºæ©Ÿåˆ¶ï¼ŒAJAX è«‹æ±‚èƒ½æ›´ç©©å®šã€å¯æ§ï¼Œä¹Ÿè®“ä½¿ç”¨è€…æ›´æ¸…æ¥šçŸ¥é“ç›®å‰æ“ä½œçš„ç‹€æ…‹èˆ‡å¾ŒçºŒæ‡‰å°ã€‚