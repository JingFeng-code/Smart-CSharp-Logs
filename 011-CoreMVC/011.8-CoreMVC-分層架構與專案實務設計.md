---
title: ğŸ›ï¸ 011.8-CoreMVC-åˆ†å±¤æ¶æ§‹èˆ‡å°ˆæ¡ˆå¯¦å‹™è¨­è¨ˆ
tags:
  - ASP.NET Core
  - MVC
  - åˆ†å±¤æ¶æ§‹
  - å°ˆæ¡ˆè¨­è¨ˆ
  - å¯¦å‹™ç¶“é©—
aliases:
  - CoreMVC åˆ†å±¤è¨­è¨ˆ
  - ASP.NET Core å°ˆæ¡ˆæ¶æ§‹
created: 2025-07-02
updated: 2025-07-02
status: è‰ç¨¿
summary: ä»‹ç´¹ ASP.NET Core MVC åˆ†å±¤æ¶æ§‹ï¼ˆå¦‚ Controllerã€Serviceã€Repositoryï¼‰ã€æ¨¡çµ„åŒ–å°ˆæ¡ˆè¨­è¨ˆåŸå‰‡èˆ‡å¸¸è¦‹å¯¦å‹™ç¶“é©—ï¼Œå”åŠ©é–‹ç™¼é«˜å¯ç¶­è­·æ€§èˆ‡å¯æ“´å……çš„æ‡‰ç”¨ã€‚
---

## ğŸ›ï¸ åˆ†å±¤æ¶æ§‹è¨­è¨ˆæ¦‚å¿µ

- **åˆ†å±¤æ¶æ§‹ï¼ˆLayered Architectureï¼‰** å°‡æ‡‰ç”¨ç¨‹å¼æ‹†åˆ†ç‚ºå¤šå€‹è·è²¬æ˜ç¢ºçš„å±¤ç´šï¼Œæå‡å¯ç¶­è­·æ€§ã€æ¸¬è©¦æ€§èˆ‡å¯æ“´å……æ€§ã€‚
- ASP.NET Core MVC å¸¸è¦‹åˆ†å±¤ï¼š
  - **Controller å±¤**ï¼šè™•ç† HTTP è«‹æ±‚ã€å”èª¿æµç¨‹ã€å›æ‡‰ View æˆ–è³‡æ–™ã€‚
  - **Service å±¤**ï¼šå°è£æ¥­å‹™é‚è¼¯ï¼Œæ¸›å°‘ Controller è² æ“”ã€‚
  - **Repository å±¤**ï¼šè³‡æ–™å­˜å–ï¼Œèˆ‡è³‡æ–™åº«äº’å‹•ï¼Œéš”é›¢ ORM å¯¦ä½œç´°ç¯€ã€‚
  - **Domain/Model å±¤**ï¼šè³‡æ–™çµæ§‹ã€å•†æ¥­é‚è¼¯èˆ‡é©—è­‰ã€‚

---

## ğŸ—‚ï¸ å°ˆæ¡ˆç›®éŒ„çµæ§‹å»ºè­°

```text
MyProject/  
â”œâ”€â”€ Controllers/ # æ§åˆ¶å™¨  
â”œâ”€â”€ Services/ # æ¥­å‹™é‚è¼¯æœå‹™  
â”œâ”€â”€ Repositories/ # è³‡æ–™å­˜å–  
â”œâ”€â”€ Models/ # è³‡æ–™æ¨¡å‹ã€ViewModel  
â”œâ”€â”€ Views/ # è¦–åœ–  
â”œâ”€â”€ Data/ # DbContextã€è³‡æ–™åº«åˆå§‹åŒ–  
â”œâ”€â”€ Middleware/ # ä¸­ä»‹è»Ÿé«”ï¼ˆå¯é¸ï¼‰  
â”œâ”€â”€ wwwroot/ # éœæ…‹è³‡æº  
â”œâ”€â”€ appsettings.json # çµ„æ…‹æª”  
â””â”€â”€ Program.cs # æ‡‰ç”¨ç¨‹å¼é€²å…¥é»
```

- ä¾éœ€æ±‚å¯æ“´å…… **Helpers**ã€**DTOs**ã€**Mappers**ã€**Tests** ç­‰ç›®éŒ„ã€‚

---
## ğŸ› ï¸ åˆ†å±¤å¯¦ä½œç¯„ä¾‹

### 1. Repository ä»‹é¢èˆ‡å¯¦ä½œ

```csharp
public interface IProductRepository  
{  
	IEnumerable<Product>Â GetAll();  
	Product GetById(int id);  
	void Add(Product entity);  
	void Update(Product entity);  
	void Delete(int id);  
}

public class ProductRepository : IProductRepository  
{  
	private readonly ApplicationDbContext _context;  
	public ProductRepository(ApplicationDbContext context)  
	{  
		_context = context;  
	}  
// ä¾ä»‹é¢å¯¦ä½œè³‡æ–™å­˜å–é‚è¼¯  
}
```

### 2. Service å±¤è¨­è¨ˆ

```csharp
public interface IProductService  
{  
	IEnumerable<Product>Â GetAllProducts();  
	Product GetProduct(int id);  
}

public class ProductService : IProductService  
{  
	private readonly IProductRepository _repo;  
	public ProductService(IProductRepository repo)  
	{  
		_repo = repo;  
	}  
// å°è£æ¥­å‹™é‚è¼¯ï¼Œèª¿ç”¨ Repository  
}
```

### 3. Controller æ³¨å…¥æœå‹™

```csharp
public class ProductController : Controller  
{  
	private readonly IProductService _service;  
	public ProductController(IProductService service)  
	{  
		_service = service;  
	}
	public IActionResult Index()
	{
	    var products = _service.GetAllProducts();
	    return View(products);
	}
}
```


---

## ğŸ§© å°ˆæ¡ˆè¨­è¨ˆå¯¦å‹™å»ºè­°

- **ä»‹é¢å°å‘è¨­è¨ˆ**ï¼šControllerã€Serviceã€Repository çš†å»ºè­°ä»¥ä»‹é¢æŠ½è±¡ï¼Œæ–¹ä¾¿å–®å…ƒæ¸¬è©¦èˆ‡æ›¿æ›å¯¦ä½œã€‚
- **ä¾è³´æ³¨å…¥**ï¼šæ‰€æœ‰æœå‹™ã€è³‡æ–™å­˜å–çš†é€é DI å®¹å™¨è¨»å†Šèˆ‡æ³¨å…¥ï¼Œé¿å…ç›´æ¥ new å¯¦ä¾‹ã€‚
- **å–®ä¸€è·è²¬åŸå‰‡**ï¼šæ¯å±¤åªè² è²¬å–®ä¸€è·è²¬ï¼Œé™ä½è€¦åˆåº¦ã€‚
- **æ¨¡çµ„åŒ–èˆ‡å¯æ“´å……æ€§**ï¼šå¤§å‹å°ˆæ¡ˆå¯ä¾åŠŸèƒ½æ¨¡çµ„æ‹†åˆ†ï¼ˆå¦‚ Areaã€Feature Folder çµæ§‹ï¼‰ã€‚
- **æ¸¬è©¦å°å‘é–‹ç™¼**ï¼šä»‹é¢åŒ–è¨­è¨ˆæœ‰åŠ©æ–¼å–®å…ƒæ¸¬è©¦èˆ‡ Mockã€‚

---

## âš ï¸ å¸¸è¦‹å•é¡Œèˆ‡æ’æŸ¥

- **æ¥­å‹™é‚è¼¯éåº¦é›†ä¸­æ–¼ Controller**ï¼šæ‡‰ä¸‹æ”¾è‡³ Service å±¤ã€‚
- **Repository èˆ‡ ORM è€¦åˆéæ·±**ï¼šä»‹é¢éš”é›¢ï¼Œé¿å…ç›´æ¥æš´éœ² DbContextã€‚
- **è³‡æ–™é©—è­‰é‡è¤‡**ï¼šçµ±ä¸€æ–¼ Model æˆ– Service å±¤è™•ç†ã€‚
- **å‘½å/çµæ§‹æ··äº‚**ï¼šéµå¾ªå‘½åæ…£ä¾‹èˆ‡åˆ†å±¤åŸå‰‡ï¼Œåˆ©æ–¼åœ˜éšŠå”ä½œã€‚

---

## ğŸ” å»¶ä¼¸é–±è®€

- [Microsoft Learnï¼šASP.NET Core åˆ†å±¤æ¶æ§‹è¨­è¨ˆ]
- [iT é‚¦å¹«å¿™ï¼š.NET åˆ†å±¤å¯¦ä½œç¶“é©—]
- [Clean Architectureã€DDDã€CQRS ç­‰é€²éšæ¶æ§‹æ¨¡å¼]

---

## ğŸ”— ç›¸é—œå¡ç‰‡

- [[011.7-CoreMVC-èˆ‡è³‡æ–™åº«æ•´åˆ (EF Core)]]
- [[011.6-CoreMVC-ä¾è³´æ³¨å…¥èˆ‡æœå‹™è¨»å†Š]]
- [[011.9-CoreMVC-éŒ¯èª¤è™•ç†èˆ‡ä¸­ä»‹è»Ÿé«” (Middleware)]]
