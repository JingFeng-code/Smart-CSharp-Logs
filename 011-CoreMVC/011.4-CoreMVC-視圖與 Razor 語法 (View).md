---
title: 👁️ 011.4-CoreMVC-視圖與 Razor 語法 (View)
tags:
  - ASP.NET Core
  - MVC
  - View
  - Razor
  - 前端整合
aliases:
  - CoreMVC View
  - ASP.NET Core Razor
created: 2025-07-02
updated: 2025-07-02
status: 草稿
summary: 介紹 ASP.NET Core MVC 的視圖設計、Razor 語法、版型與部分檢視，協助建立動態且可維護的前端頁面。
---

## 👁️ View（視圖）基礎

- **View** 負責將 Model 資料以 HTML 呈現給使用者，是 MVC 架構的前端顯示層。
- ASP.NET Core MVC 採用 **Razor** 標記語法，結合 C# 與 HTML，實現動態網頁內容。

---

## 📝 Razor 語法基礎

- Razor 以 `@` 開頭嵌入 C# 程式碼於 HTML。
- 支援變數、條件、迴圈、函式等 C# 語法。

### 常見語法範例

```csharp
@model ProductViewModel

<h2>@Model.Name</h2> <p>價格：@Model.Price</p>

@if (Model.Price > 1000)  
{  
	<span class="text-danger">高價商品</span>  
}
<ul> @foreach(var item in Model.Tags) { <li>@item</li> } </ul>
```

## 📁 視圖檔案與結構

- **Views/** 目錄依控制器名稱分資料夾，每個 Action 對應一個 .cshtml 檔案。

```text
Views/
├── Product/
│   ├── Index.cshtml
│   ├── Details.cshtml
│   └── Edit.cshtml
└── Shared/
    ├── _Layout.cshtml
    └── _ValidationScriptsPartial.cshtml
```

- **Shared/** 目錄放置共用版型與部分檢視（Partial View）。

---
## 🏗️ 版型（Layout）與部分檢視（Partial View）

- **_Layout.cshtml**：全站共用頁面框架，定義標頭、選單、頁尾等。
    - 於 View 中指定：`@{ Layout = "_Layout"; }`

- **Partial View**：重複區塊（如表單、清單）可獨立成部分檢視，方便重用。
    - 引用方式：`@Html.Partial("_ProductForm", Model)`


---
## 🛠️ ViewData、ViewBag、TempData

- **ViewData**：字典型態，可在 Controller 傳遞資料到 View。
- **ViewBag**：動態屬性語法，簡化資料傳遞。
- **TempData**：用於跨請求（Redirect）暫存資料。
- **ViewData["Title"]** = "商品列表";
- **ViewBag.Message** = "歡迎光臨";
- **TempData["Success"]** = "新增成功";

---
## ✅ 表單與驗證訊息顯示

- 搭配 `Html.BeginForm`、`Html.TextBoxFor`、`Html.ValidationMessageFor` 等輔助方法建立表單。
- 驗證錯誤訊息自動顯示於對應欄位。

```csharp
@using (Html.BeginForm())
{
    @Html.LabelFor(m => m.Name)
    @Html.TextBoxFor(m => m.Name)
    @Html.ValidationMessageFor(m => m.Name)
    <button type="submit">送出</button>
}
```

---
## ⚠️ 常見問題與建議

- **避免在 View 寫複雜邏輯**，應將業務邏輯留在 Controller 或 Model。
- **善用 Partial View 與 Layout**，提升維護性與一致性。
- **Model 命名明確**，避免型別混淆。
- **前端資源（CSS/JS）** 建議放於 wwwroot，統一管理。

---
## 🔗 相關卡片

- [[011.3-CoreMVC-模型設計與資料綁定 (Model)]]
- [[011.5-CoreMVC-表單處理與驗證]]
- [[008-JS-總覽]]