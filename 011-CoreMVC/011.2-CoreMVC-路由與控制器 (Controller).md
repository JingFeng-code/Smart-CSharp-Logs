---
title: ğŸš¦ 011.2-CoreMVC-è·¯ç”±èˆ‡æ§åˆ¶å™¨ (Controller)
tags:
  - ASP.NET Core
  - MVC
  - è·¯ç”±
  - æ§åˆ¶å™¨
  - æ¶æ§‹è¨­è¨ˆ
aliases:
  - CoreMVC è·¯ç”±
  - ASP.NET Core Controller
created: 2025-07-02
updated: 2025-07-02
status: è‰ç¨¿
summary: ä»‹ç´¹ ASP.NET Core MVC çš„è·¯ç”±æ©Ÿåˆ¶ã€æ§åˆ¶å™¨è¨­è¨ˆåŸå‰‡ã€Action æ–¹æ³•èˆ‡åƒæ•¸ç¶å®šï¼Œä¸¦æ¶µè“‹å±¬æ€§è·¯ç”±èˆ‡å¯¦å‹™é–‹ç™¼æŠ€å·§ã€‚
---

## ğŸš¦ è·¯ç”±ï¼ˆRoutingï¼‰åŸºç¤

- **è·¯ç”±ï¼ˆRoutingï¼‰** æ˜¯å°‡ HTTP è«‹æ±‚ URL æ˜ å°„åˆ°å°æ‡‰çš„æ§åˆ¶å™¨ï¼ˆControllerï¼‰èˆ‡å‹•ä½œæ–¹æ³•ï¼ˆActionï¼‰çš„æ©Ÿåˆ¶ã€‚
- ASP.NET Core MVC æ¡ç”¨ã€Œå±¬æ€§è·¯ç”±ï¼ˆAttribute Routingï¼‰ã€èˆ‡ã€Œæ…£ä¾‹è·¯ç”±ï¼ˆConventional Routingï¼‰ã€å…©ç¨®æ–¹å¼ï¼Œå¯å½ˆæ€§çµ„åˆä½¿ç”¨ã€‚

### æ…£ä¾‹è·¯ç”±ç¯„ä¾‹

- åœ¨ `Program.cs` æˆ– `Startup.cs` è¨­å®šï¼š
```csharp
app.UseEndpoints(endpoints =>  
{  
	endpoints.MapControllerRoute(  
	name: "default",  
	pattern: "{controller=Home}/{action=Index}/{id?}");  
});
```
- æ”¯æ´è‡ªè¨‚è·¯å¾‘ã€æ›´å½ˆæ€§çš„ API è¨­è¨ˆã€‚

---
## ğŸ§© æ§åˆ¶å™¨ï¼ˆControllerï¼‰è¨­è¨ˆ

- **æ§åˆ¶å™¨** æ˜¯è² è²¬è™•ç† HTTP è«‹æ±‚ã€å”èª¿å•†æ¥­é‚è¼¯èˆ‡å›æ‡‰ View æˆ–è³‡æ–™çš„æ ¸å¿ƒå…ƒä»¶ã€‚
- æ¯å€‹ Controller é¡åˆ¥é€šå¸¸ç¹¼æ‰¿è‡ª `Controller` æˆ– `ControllerBase`ï¼ˆAPI å°ˆç”¨ï¼‰ã€‚

### Controller ç¯„ä¾‹

```csharp
public class ProductController : Controller  
{  
	// GET: /Product/Index  
public IActionResult Index()  
{  
	// å–å¾—è³‡æ–™ï¼Œå‚³éçµ¦ View  
	return View();  
}

// GET: /Product/Details/5
public IActionResult Details(int id)
{
    // æ ¹æ“š id æŸ¥è©¢ç”¢å“
    return View();
}

// POST: /Product/Create
[HttpPost]
public IActionResult Create(Product model)
{
    if (ModelState.IsValid)
    {
        // æ–°å¢è³‡æ–™
        return RedirectToAction("Index");
    }
    return View(model);
}
```

---
## ğŸ“ Action æ–¹æ³•èˆ‡åƒæ•¸ç¶å®š

- **Action æ–¹æ³•**ï¼šController å…§çš„å…¬é–‹æ–¹æ³•ï¼Œå°æ‡‰ä¸€å€‹è·¯ç”±èˆ‡ HTTP å‹•ä½œï¼ˆGETã€POSTã€PUTã€DELETEï¼‰ã€‚
- **åƒæ•¸ç¶å®š**ï¼šASP.NET Core æœƒè‡ªå‹•å°‡ URLã€QueryStringã€Formã€Route è³‡æ–™ç¶å®šåˆ°æ–¹æ³•åƒæ•¸ã€‚
  - åŸºæœ¬å‹åˆ¥è‡ªå‹•ç¶å®šï¼ˆå¦‚ intã€stringï¼‰
  - è¤‡é›œå‹åˆ¥è‡ªå‹•ç¶å®šè¡¨å–®è³‡æ–™åˆ° Model

---
## ğŸ› ï¸ å±¬æ€§è·¯ç”±èˆ‡é€²éšæ‡‰ç”¨

- `[HttpGet]`ã€`[HttpPost]`ã€`[HttpPut]`ã€`[HttpDelete]`ï¼šæ˜ç¢ºæŒ‡å®š HTTP å‹•ä½œã€‚
- `[Route]` æ”¯æ´è·¯å¾‘åƒæ•¸ã€å¯çµåˆ Tokenï¼ˆå¦‚ `[Route("Edit/{id:int}")]`ï¼‰ã€‚
- `[FromQuery]`ã€`[FromRoute]`ã€`[FromForm]`ã€`[FromBody]`ï¼šæ˜ç¢ºæŒ‡å®šè³‡æ–™ä¾†æºï¼Œå¸¸ç”¨æ–¼ APIã€‚

---
## âš ï¸ å¸¸è¦‹å•é¡Œèˆ‡å¯¦å‹™å»ºè­°

- **è·¯ç”±è¡çª/è¦†è“‹**ï¼šå±¬æ€§è·¯ç”±èˆ‡æ…£ä¾‹è·¯ç”±æ··ç”¨æ™‚ï¼Œéœ€æ³¨æ„å„ªå…ˆé †åºèˆ‡å”¯ä¸€æ€§ã€‚
- **Action æ–¹æ³•å‘½å**ï¼šå»ºè­°ä¾ RESTful æ¨™æº–å‘½åï¼ˆIndexã€Detailsã€Createã€Editã€Deleteï¼‰ã€‚
- **åƒæ•¸é©—è­‰**ï¼šå–„ç”¨ ModelState èˆ‡è³‡æ–™è¨»è§£ç¢ºä¿è³‡æ–™æ­£ç¢ºæ€§ã€‚
- **ä¾è³´æ³¨å…¥**ï¼šController å¯ç›´æ¥æ³¨å…¥æœå‹™ï¼ˆServiceï¼‰ï¼Œæå‡å¯æ¸¬è©¦æ€§èˆ‡ç¶­è­·æ€§ã€‚

---
## ğŸ”— ç›¸é—œå¡ç‰‡

- [[011.1-CoreMVC-æ¡†æ¶ä»‹ç´¹èˆ‡å°ˆæ¡ˆçµæ§‹]]
- [[011.3-CoreMVC-æ¨¡å‹è¨­è¨ˆèˆ‡è³‡æ–™ç¶å®š (Model)]]
- [[011.4-CoreMVC-è¦–åœ–èˆ‡ Razor èªæ³• (View)]]


