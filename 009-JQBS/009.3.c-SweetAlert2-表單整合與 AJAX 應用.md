---
title: ğŸ“Œ 009.3.c-SweetAlert2-è¡¨å–®æ•´åˆèˆ‡ AJAX æ‡‰ç”¨
tags:
  - SweetAlert2
  - Forms
  - AJAX
  - API
aliases:
  - SweetAlert2 è¡¨å–®
  - AJAX å½ˆçª—
created: 2025-06-26
updated: 2025-06-26
status: è‰ç¨¿
summary: æœ¬ç­†è¨˜ä»‹ç´¹å¦‚ä½•åˆ©ç”¨ SweetAlert2 çš„è¼¸å…¥å½ˆçª—åŠŸèƒ½æ”¶é›†ä½¿ç”¨è€…è³‡æ–™ï¼Œä¸¦çµåˆ AJAX å¯¦ç¾éåŒæ­¥è³‡æ–™æäº¤ï¼Œæä¾›ç„¡åˆ·æ–°çš„äº’å‹•é«”é©—ã€‚
---

## ğŸ“˜ æ ¸å¿ƒæ¦‚å¿µï¼šå½ˆçª—å…§çš„è¡¨å–®

SweetAlert2 çš„ `input` é¸é …ä¸åªæ”¯æ´å–®ç´”çš„æ–‡å­—è¼¸å…¥æ¡†ï¼Œé‚„æ”¯æ´å¤šç¨®è¡¨å–®é¡å‹ï¼Œè®“ä½ å¯ä»¥ç›´æ¥åœ¨å½ˆçª—å…§å»ºç«‹ä¸€å€‹å°å‹è¡¨å–®ã€‚

#### **æ”¯æ´çš„è¼¸å…¥é¡å‹ (input)**

- `'text'`
- `'email'`
- `'password'`
- `'textarea'`
- `'select'`
- `'radio'`
- `'checkbox'`
- `'file'`
- ...ç­‰ç­‰

**ç¯„ä¾‹**ï¼š
```javascript
// å»ºç«‹ä¸€å€‹è®“ä½¿ç”¨è€…è¼¸å…¥å¯†ç¢¼çš„å½ˆçª—
Swal.fire({
  title: 'è«‹è¼¸å…¥ä½ çš„å¯†ç¢¼',
  input: 'password', // è¨­ç½®ç‚ºå¯†ç¢¼è¼¸å…¥æ¡†
  inputPlaceholder: 'è«‹åœ¨æ­¤è¼¸å…¥...',
  inputAttributes: {
    maxlength: 10, // è¨­å®šæœ€å¤§é•·åº¦
    autocapitalize: 'off',
    autocorrect: 'off'
  }
});
```

---

## ğŸ› ï¸ AJAX æ‡‰ç”¨ï¼šä¸²æ¥å¾Œç«¯ API

å°‡ SweetAlert2 èˆ‡ AJAX çµåˆï¼Œå¯ä»¥å¯¦ç¾ç„¡åˆ·æ–°çš„è³‡æ–™æäº¤ã€‚é€™æ˜¯é€™å€‹å·¥å…·æœ€å¯¦ç”¨çš„å ´æ™¯ä¹‹ä¸€ã€‚

### 1. **åŸºæœ¬æµç¨‹**

1. **è§¸ç™¼å½ˆçª—**: ä½¿ç”¨è€…é»æ“ŠæŒ‰éˆ•ï¼Œè§¸ç™¼ `Swal.fire()` å½ˆçª—ã€‚
2. **æ”¶é›†è¼¸å…¥**: ä½¿ç”¨è€…åœ¨å½ˆçª—å…§è¼¸å…¥è³‡æ–™ï¼Œç„¶å¾Œé»æ“Šã€Œç¢ºèªã€ã€‚
3. **è™•ç† Promise**: `Swal.fire()` å›å‚³çš„ Promise æœƒè¢«è§£æ±º (resolved)ï¼Œä¸¦åœ¨ `then()` å‡½å¼ä¸­å–å¾—è¼¸å…¥å€¼ã€‚
4. **ç™¼é€ AJAX**: åœ¨ `then()` å‡½å¼å…§éƒ¨ï¼Œä½¿ç”¨ jQuery çš„ `$.ajax()` æˆ– `$.post()` å°‡è³‡æ–™æäº¤åˆ°å¾Œç«¯ã€‚
5. **é¡¯ç¤ºçµæœ**: æ ¹æ“š AJAX è«‹æ±‚çš„æˆåŠŸæˆ–å¤±æ•—ï¼Œé¡¯ç¤ºå°æ‡‰çš„æç¤ºå½ˆçª—ã€‚

### 2. **å¯¦ä½œç¯„ä¾‹ï¼šæ›´æ–°ä½¿ç”¨è€…åç¨±**

```javascript
// é»æ“ŠæŒ‰éˆ•è§¸ç™¼å½ˆçª—
$('#update-username-btn').click(function() {
  Swal.fire({
    title: 'æ›´æ–°ä½¿ç”¨è€…åç¨±',
    input: 'text',
    inputLabel: 'è«‹è¼¸å…¥æ–°çš„ä½¿ç”¨è€…åç¨±',
    inputPlaceholder: 'ä¾‹å¦‚ï¼šjohn_doe',
    showCancelButton: true,
    inputValidator: (value) => {
      // ç°¡å–®çš„è¼¸å…¥é©—è­‰
      if (!value) {
        return 'ä½¿ç”¨è€…åç¨±ä¸èƒ½ç‚ºç©ºï¼';
      }
    }
  }).then((result) => {
    // æª¢æŸ¥ä½¿ç”¨è€…æ˜¯å¦é»æ“Šäº†ç¢ºèªï¼Œä¸”æœ‰è¼¸å…¥å€¼
    if (result.isConfirmed && result.value) {
      // é¡¯ç¤ºä¸€å€‹è¼‰å…¥ä¸­çš„å½ˆçª—ï¼Œä¸å…è¨±é—œé–‰
      Swal.fire({
        title: 'æ­£åœ¨æ›´æ–°...',
        didOpen: () => {
          Swal.showLoading();
        },
        allowOutsideClick: false,
        showConfirmButton: false
      });

      // 4. ç™¼é€ AJAX è«‹æ±‚
      // å‡è¨­ä½ çš„å¾Œç«¯ API æ˜¯ '/api/update-username'
      $.post('/api/update-username', { newUsername: result.value })
        .done(function(response) {
          // è«‹æ±‚æˆåŠŸï¼Œé¡¯ç¤ºæˆåŠŸæç¤º
          Swal.fire('æ›´æ–°æˆåŠŸï¼', 'ä½ çš„ä½¿ç”¨è€…åç¨±å·²æ›´æ–°ã€‚', 'success');
        })
        .fail(function() {
          // è«‹æ±‚å¤±æ•—ï¼Œé¡¯ç¤ºéŒ¯èª¤æç¤º
          Swal.fire('æ›´æ–°å¤±æ•—', 'ä¼ºæœå™¨ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚', 'error');
        });
    }
  });
});
```

é€™å€‹ç¯„ä¾‹å±•ç¤ºäº†å¦‚ä½•å®Œç¾çµåˆ **SweetAlert2** å’Œ **jQuery AJAX**ï¼Œç‚ºä½¿ç”¨è€…æä¾›ç„¡ç¸«çš„äº’å‹•é«”é©—ã€‚