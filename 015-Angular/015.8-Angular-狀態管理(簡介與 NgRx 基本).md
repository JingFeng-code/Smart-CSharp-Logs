---
title: ğŸ§  015.8-Angular-ç‹€æ…‹ç®¡ç†(ç°¡ä»‹èˆ‡ NgRx åŸºæœ¬)  
tags:
- Angular 
- NgRx
- ç‹€æ…‹ç®¡ç†
- Redux
- å–®å‘è³‡æ–™æµ  
aliases:
- Angular ç‹€æ…‹ç®¡ç†
- NgRx å…¥é–€
- Angular Redux  
created: 2025-07-23  
updated: 2025-07-23  
status: è‰ç¨¿  
summary: æœ¬ç¯‡ä»‹ç´¹ Angular ä¸­çš„ç‹€æ…‹ç®¡ç†åŸºæœ¬è§€å¿µï¼Œä¸¦é€é NgRx å¥—ä»¶å¯¦ä½œ Redux æ¶æ§‹çš„ç‹€æ…‹è™•ç†ï¼Œé©åˆåˆå­¸è€…äº†è§£ NgRx çš„ storeã€actionã€reducerã€effect ç­‰æ ¸å¿ƒæ¦‚å¿µèˆ‡ç”¨æ³•ã€‚
---

---

## ğŸ“˜ æœ¬ç¯‡é‡é»ç´¢å¼•

- ç‚ºä»€éº¼éœ€è¦ç‹€æ…‹ç®¡ç†ï¼Ÿ

- ç‹€æ…‹ç®¡ç†æ¨¡å‹ç°¡ä»‹ï¼ˆå–®å‘è³‡æ–™æµï¼‰

- NgRx æ˜¯ä»€éº¼ï¼Ÿ

- NgRx æ¶æ§‹è¦ç´ ï¼ˆStore / Action / Reducer / Selector / Effectï¼‰

- NgRx åŸºæœ¬å®‰è£èˆ‡è¨­å®š

- NgRx å°ç¯„ä¾‹ï¼šç®¡ç†è¨ˆæ•¸å™¨æˆ–ä½¿ç”¨è€…ç‹€æ…‹

---
## 1ï¸âƒ£ ç‚ºä»€éº¼éœ€è¦ç‹€æ…‹ç®¡ç†ï¼Ÿ

ç•¶æ‡‰ç”¨è®Šå¾—è¤‡é›œã€å…ƒä»¶ä¹‹é–“éœ€è¦å…±äº«è³‡æ–™æ™‚ï¼Œé€é `@Input()` / `@Output()` æˆ– service é€šè¨Šæœƒè®Šå¾—é›£ä»¥ç¶­è­·ã€‚

### æœ‰äº†ç‹€æ…‹ç®¡ç†çš„å¥½è™•ï¼š

- æ‰€æœ‰ç‹€æ…‹é›†ä¸­ç®¡ç†

- è³‡æ–™è®ŠåŒ–å¯è¿½è¹¤ï¼ˆä¾‹å¦‚ï¼šDevToolï¼‰

- æ›´å®¹æ˜“ Debug / æ¸¬è©¦

- æ›´é©åˆå¤šäººå”ä½œ

---
## 2ï¸âƒ£ å–®å‘è³‡æ–™æµæ¨¡å‹

NgRx æ¡ç”¨å–®å‘è³‡æ–™æµï¼ˆUnidirectional Data Flowï¼‰ï¼š

```text
Component â†’ dispatch Action â†’ Reducer â†’ Store â†’ Selector â†’ Component
```

---
## 3ï¸âƒ£ NgRx æ˜¯ä»€éº¼ï¼Ÿ

NgRx æ˜¯ Angular å®˜æ–¹æ¨è–¦çš„ Redux æ¶æ§‹å¯¦ä½œï¼Œä½¿ç”¨ RxJS æµæ“ä½œä¾†é€²è¡Œè³‡æ–™ç‹€æ…‹è™•ç†ã€‚

ğŸ“¦ ä¸»è¦æ ¸å¿ƒå¥—ä»¶ï¼š

- `@ngrx/store`ï¼šç‹€æ…‹é›†ä¸­å„²å­˜

- `@ngrx/effects`ï¼šè™•ç†éåŒæ­¥é‚è¼¯

- `@ngrx/entity`ï¼šè™•ç†é›†åˆè³‡æ–™

- `@ngrx/store-devtools`ï¼šé™¤éŒ¯å·¥å…·

---

## 4ï¸âƒ£ NgRx æ¶æ§‹è¦ç´ èªªæ˜

| åç¨±       | èªªæ˜                 |
| -------- | ------------------ |
| Action   | å®šç¾©è¦åšä»€éº¼äº‹æƒ…           |
| Reducer  | æ ¹æ“š Action æ›´æ–° state |
| Store    | å„²å­˜æ•´å€‹æ‡‰ç”¨ç‹€æ…‹           |
| Selector | æå– state ä¸­çš„è³‡æ–™      |
| Effect   | è™•ç† API ç­‰å‰¯ä½œç”¨æ“ä½œï¼ˆéåŒæ­¥ï¼‰ |


---
## 5ï¸âƒ£ å®‰è£ NgRx å¥—ä»¶

```bash
ng add @ngrx/store
ng add @ngrx/effects
ng add @ngrx/store-devtools
```

> å»ºè­°å…ˆå®‰è£åœ¨å°å‹å°ˆæ¡ˆä¸­ç·´ç¿’ä½¿ç”¨ï¼Œé¿å…åˆæœŸéåº¦è¤‡é›œã€‚

---
## 6ï¸âƒ£ NgRx ç°¡æ˜“ç¯„ä¾‹ï¼šCounter è¨ˆæ•¸å™¨

### å®šç¾© Action

```typescript
import { createAction } from '@ngrx/store';

export const increment = createAction('[Counter] Increment');
export const decrement = createAction('[Counter] Decrement');
```

---
### å®šç¾© Reducer

```typescript
import { createReducer, on } from '@ngrx/store';
import { increment, decrement } from './counter.actions';

export const initialState = 0;

export const counterReducer = createReducer(
  initialState,
  on(increment, state => state + 1),
  on(decrement, state => state - 1)
);
```

---
### è¨»å†Š Store

åœ¨ `app.module.ts`ï¼š

```typescript
import { StoreModule } from '@ngrx/store';
import { counterReducer } from './counter.reducer';

@NgModule({
  imports: [
    StoreModule.forRoot({ count: counterReducer })
  ]
})
```

---
### ä½¿ç”¨ Store æ–¼ Component ä¸­

```typescript
constructor(private store: Store<{ count: number }>) {}

count$ = this.store.select('count');

increment() {
  this.store.dispatch(increment());
}
```

```typescript
<button (click)="increment()">+1</button>
<p>ç›®å‰æ•¸å€¼ï¼š{{ count$ | async }}</p>
```

---

## âœ… å°çµ

- NgRx æ¡ç”¨ Redux æ¶æ§‹ï¼Œä½¿ç”¨ Observable èˆ‡ Action é©…å‹•è³‡æ–™æµã€‚

- é©åˆä¸­å¤§å‹å°ˆæ¡ˆé€²è¡Œç‹€æ…‹é›†ä¸­ç®¡ç†ã€‚

- åˆå­¸è€…å¯å¾ Counter æˆ–ä½¿ç”¨è€…æ¸…å–®é–‹å§‹å¯¦ä½œç·´ç¿’ã€‚

- è‹¥å°ˆæ¡ˆè¼ƒå°å¯è€ƒæ…®å…ˆä½¿ç”¨ Service ç®¡ç†ç‹€æ…‹ï¼Œé¿å…éåº¦è¨­è¨ˆã€‚

---

## ğŸ”— å»¶ä¼¸é–±è®€

- [[015.7-Angular-HTTP Client èˆ‡ API ä¸²æ¥]]
- [[015.10-Angular-æœ€ä½³å¯¦å‹™èˆ‡æ•ˆèƒ½å„ªåŒ–]]
- [[012-RESTfulAPI-ç¸½è¦½]]
- [ NgRx å®˜æ–¹ç¶²ç«™](https://ngrx.io/)