---
title: "JavaScript 變數與作用域"
tags: [JavaScript, JS, 變數, 作用域, 作用域鏈]
aliases: [JS變數, JS作用域, 作用域鏈, let var const]
created: 2025-06-22
updated: 2025-06-22
status: "草稿"
summary: "本筆記整理 JavaScript 中變數的宣告方式與作用域規則，包含 var、let、const 差異與作用域鏈。"
---

---
## 1. 三種變數宣告方式

| 關鍵字  | 是否可重新賦值 | 是否可重新宣告 | 是否有區塊作用域 | Hoisting 行為 |
|---------|----------------|----------------|-------------------|----------------|
| `var`   | ✅             | ✅             | ❌（僅函式作用域） | ✅（預設 undefined） |
| `let`   | ✅             | ❌             | ✅（區塊作用域）    | ✅（但無法提前使用） |
| `const` | ❌（不可改值） | ❌             | ✅（區塊作用域）    | ✅（但無法提前使用） |

---
## 2. 作用域類型（Scope）

- **全域作用域（Global）**：在函式外宣告，整個程式都可以使用
- **函式作用域（Function Scope）**：使用 `var` 宣告的變數只在函式內有效
- **區塊作用域（Block Scope）**：使用 `let`、`const` 在區塊 `{}` 中有效

### 範例程式碼：

```javascript
function example() {
    if (true) {
        var a = 1;
        let b = 2;
        const c = 3;
    }
    console.log(a); // ✅ 1
    console.log(b); // ❌ ReferenceError
    console.log(c); // ❌ ReferenceError
}
```

---
## 3. Hoisting（提升）

- `var` 宣告的變數會被「提升」到最上層，值為 `undefined`
- `let` 與 `const` 也會提升，但不能在宣告前使用（會報錯）

### 範例程式碼：

```javascript
console.log(x); // undefined
var x = 10;

console.log(y); // ReferenceError
let y = 20;
```

## 4. TDZ（Temporal Dead Zone）

- `let` 和 `const` 宣告的變數，在宣告前的區塊中會進入暫時性死區（TDZ）
- 在 TDZ 內使用會報錯

## 5. 建議使用方式

- **使用 `let`**：大多數需要變動的變數
- **使用 `const`**：常數、不會被重新指定的變數
- **避免使用 `var`**：除非相容舊版 JS，否則不建議